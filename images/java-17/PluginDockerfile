# ghcr.io/ls1intum/theia/java-17-plugins
# Builder stage
FROM node:18-bullseye as plugin-image

WORKDIR /home/theia

# Copy required configuration files
COPY yarn.lock yarn.lock

# Copy image specific files - this should overwrite the default files from the repository
COPY images/java-17/package.json .

# Remove unnecesarry files for the browser application
# Download plugins and build application production mode
# Use yarn autoclean to remove unnecessary files from package dependencies
RUN yarn --pure-lockfile && \
    yarn download:plugins