appId: eclipse.theia
productName: TheiaIDE
copyright: Copyright Â© 2020-2025 Eclipse Foundation, Inc
electronDist: ../../node_modules/electron/dist
electronVersion: 38.4.0
asar: true
asarUnpack:
  - "**/lib/backend/native/**"
  - "**/lib/build/Release/**"
nodeGypRebuild: false
npmRebuild: false

directories:
  buildResources: resources

# node_modules and package.json are copied automatically
# Exclude node_modules manually because electron is copied by electron-builder and we are using a bundled backend
files:
  - src-gen
  - lib
  - resources/icons/WindowIcon/512-512.png
  - resources/TheiaIDESplash.svg
  - scripts
  - "!**node_modules/**"
extraResources:
  - from: ../../plugins
    to: app/plugins

win:
  icon: resources/icons/WindowsLauncherIcons/TheiaIDE.ico
  target:
    - nsis
  signtoolOptions:
    sign: ./scripts/windows-sign.js
  publish:
    provider: generic
    url: "https://download.eclipse.org/theia/ide/${version}/windows"
    useMultipleRangeRequest: false
mac:
  icon: resources/icons/MacLauncherIcons/icon.icns
  category: public.app-category.developer-tools
  protocols:
    - name: theia
      schemes:
        - theia
  darkModeSupport: true
  target:
    - dmg
    - zip
  publish:
    provider: generic
    url: "https://download.eclipse.org/theia/ide/latest/macos"
linux:
  icon: resources/icons/LinuxLauncherIcons
  category: Development
  mimeTypes:
    - inode/directory
  vendor: Eclipse Foundation, Inc
  target:
    - deb
    - AppImage
  publish:
    provider: generic
    url: "https://download.eclipse.org/theia/ide/latest/linux"

nsis:
  menuCategory: true
  oneClick: false
  perMachine: false
  installerHeaderIcon: resources/icons/WindowsLauncherIcons/TheiaIDE.ico
  installerIcon: resources/icons/WindowsLauncherIcons/TheiaIDE.ico
  uninstallerIcon: resources/icons/WindowsLauncherIcons/TheiaIDE.ico
  installerSidebar: resources/icons/InstallerSidebarImage/164-314Windows.bmp
  uninstallerSidebar: resources/icons/InstallerSidebarImage/164-314Windows.bmp
  allowToChangeInstallationDirectory: true
  runAfterFinish: false
  artifactName: ${productName}Setup.${ext}
  license: LICENSE
dmg:
  artifactName: ${productName}.${ext}
deb:
  artifactName: ${productName}.${ext}
appImage:
  artifactName: ${productName}.${ext}

afterPack: ./scripts/after-pack.js
